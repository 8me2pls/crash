<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Discord">
  <meta name="twitter:card" content="summary_large_image">
  <title>Discord Embed</title>
  <script>
    function parseEmbeds() {
      const params = new URLSearchParams(window.location.search);
      const raw = params.get("data");
      try { return JSON.parse(raw); }
      catch { return []; }
    }

    function setMeta(embed) {
      if (embed.title) addMeta("og:title", embed.title);
      if (embed.desc) addMeta("og:description", embed.desc);
      if (embed.image) addMeta("og:image", embed.image);
      if (embed.url) addMeta("og:url", embed.url);
    }

    function addMeta(property, content) {
      const meta = document.createElement("meta");
      meta.setAttribute("property", property);
      meta.setAttribute("content", content);
      document.head.appendChild(meta);
    }

    window.onload = () => {
      const embeds = parseEmbeds();
      if (!embeds.length) return;

      // first embed defines preview
      setMeta(embeds[0]);

      // redirect if first embed has URL
      if (embeds[0].url) {
        window.location.href = embeds[0].url;
      }
    }
  </script>
</head>
<body style="background:#2f3136; color:white; font-family:sans-serif;">
  <h2 style="padding:20px;">Loading embed...</h2>
</body>
</html>
