<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Embed Maker</title>
  <style>
    body {
      background:#2c2f33;
      color:#fff;
      font-family:sans-serif;
      display:flex;
      justify-content:center;
      align-items:flex-start;
      min-height:100vh;
      padding:20px;
    }
    .box {
      background:#23272a;
      padding:20px;
      border-radius:10px;
      max-width:500px;
      width:100%;
    }
    input, textarea, button {
      width:100%;
      margin:6px 0;
      padding:8px;
      border:none;
      border-radius:5px;
      font-size:14px;
    }
    button {
      background:#5865F2;
      color:#fff;
      cursor:pointer;
      font-weight:bold;
    }
    .embed {
      background:#2f3136;
      border-radius:8px;
      padding:15px;
      margin-top:15px;
      border-left:6px solid #5865F2;
      cursor:pointer;
      max-width:500px;
    }
    .embed h2 { margin:0; font-size:16px; color:#fff; }
    .embed p { color:#ddd; margin:5px 0; font-size:14px; }
    .embed img { max-width:80px; margin-top:10px; border-radius:5px; }
    .hidden { display:none; }
  </style>
</head>
<body>
  <div class="box" id="maker">
    <h2>Embed Maker</h2>
    <form id="f">
      <input id="title" placeholder="Title" required>
      <textarea id="desc" placeholder="Description"></textarea>
      <input id="color" type="color" value="#5865F2">
      <input id="thumb" placeholder="Thumbnail URL">
      <input id="redirect" placeholder="Redirect URL" required>
      <button type="submit">Generate Link</button>
    </form>
    <div id="out" class="hidden">
      <p>Share this link:</p>
      <input id="link" readonly>
    </div>
  </div>

  <div id="viewer" class="hidden"></div>

  <script>
    const f = document.getElementById("f");
    const out = document.getElementById("out");
    const link = document.getElementById("link");
    const maker = document.getElementById("maker");
    const viewer = document.getElementById("viewer");

    f.addEventListener("submit", e => {
      e.preventDefault();
      const p = new URLSearchParams({
        t: f.title.value,
        d: f.desc.value,
        c: f.color.value,
        th: f.thumb.value,
        r: f.redirect.value
      });
      link.value = `${location.origin}${location.pathname}?${p.toString()}`;
      out.classList.remove("hidden");
    });

    // --- Render embed if query present ---
    const q = new URLSearchParams(location.search);
    if (q.get("t")) {
      maker.classList.add("hidden");
      const color = q.get("c") || "#5865F2";
      const html = `
        <div class="embed" id="emb" style="border-left:6px solid ${color}">
          <h2>${q.get("t")}</h2>
          <p>${q.get("d") || ""}</p>
          ${q.get("th") ? `<img src="${q.get("th")}" alt="thumb">` : ""}
        </div>`;
      viewer.innerHTML = html;
      viewer.classList.remove("hidden");
      document.getElementById("emb").onclick = () => location.href = q.get("r") || "/";
    }
  </script>
</body>
</html>
